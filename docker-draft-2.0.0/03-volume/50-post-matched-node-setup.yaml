tosca_definitions_version: alien_dsl_2_0_0

metadata:
  template_name: docker-draft.03-volume
  template_version: 2.0.0-SNAPSHOT
  template_author: alien4cloud

description: >
  A nocellar and a mongo container inside a deployment unit also hosting a volume

imports:
  - docker-types:1.4.0-SNAPSHOT
  - tosca-normative-types:2.0.0-SNAPSHOT
  - docker-draft.sandbox.samples:2.0.0-SNAPSHOT

topology_template:

  description: >
    A nocellar and a mongo container inside a deployment unit also hosting a volume

  node_templates:

    ContainerDeploymentUnit:
      type: org.alien4cloud.extended.container.kubernetes.KubenetesResource
      # Missing capa & req
      requirements:
        - dependency:
            type_requirement: dependency
            node: Mongo_Service
            capability: tosca.capabilities.Node
            relationship: tosca.relationships.DependsOn
      artifacts:
        type: tosca.artifacts.File
        file: kubernetes/ContainerDeploymentUnit.yaml
        description: A kubernetes file

    Nodecellar_Service:
      type: org.alien4cloud.extended.container.kubernetes.KubenetesResource
      # Missing capa & req
      requirements:
        - dependency:
            type_requirement: dependency
            node: ContainerDeploymentUnit
            capability: tosca.capabilities.Node
            relationship: tosca.relationships.DependsOn
      artifacts:
        type: tosca.artifacts.File
        file: kubernetes/Nodecellar_Service.yaml
        description: A kubernetes file

    Mongo_Service:
      type: org.alien4cloud.extended.container.kubernetes.KubenetesResource
      # Missing capa & req
      requirements:
        - dependency:
            type_requirement: dependency
            node: ContainerDeploymentUnit
            capability: tosca.capabilities.Node
            relationship: tosca.relationships.DependsOn
      artifacts:
        type: tosca.artifacts.File
        file: kubernetes/Nodecellar_Service.yaml
        description: A kubernetes file